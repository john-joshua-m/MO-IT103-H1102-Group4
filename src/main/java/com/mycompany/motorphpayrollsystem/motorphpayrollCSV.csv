package com.mycompany.motorphpayrollsystem;

import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.util.List;

public class PayrollSystemGUI extends JFrame {
    private Motorphpayrollsystem payrollSystem;
    private EmployeeManager manageEmployee;

    JButton buttonCalculate;
    JButton buttonRenderHours;
    JButton buttonOvertime;
    JButton buttonAddEmployee;
    JButton buttonView;
    JButton buttonEdit;
    JButton buttonDelete;

    JPanel menuPanel; // Declare menuPanel at the class level
   
        public PayrollSystemGUI() {
        // Initialize backend systems
        this.payrollSystem = new Motorphpayrollsystem();
        this.manageEmployee = new EmployeeManager();

        // Frame setup
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setResizable(false);
        setTitle("MotorPH Payroll System");
        setSize(600, 400);
        setLayout(null); // Using null layout
        setLocationRelativeTo(null);

        // Set icon image
        ImageIcon image = new ImageIcon("./resources/MotorPH.png"); //create image icon
        setIconImage(image.getImage());

        // Background (image)
        ImageIcon bgIcon = new ImageIcon("./resources/bg3.png"); //get the image from the resources folder
        Image scaled = bgIcon.getImage().getScaledInstance(600, 300, Image.SCALE_SMOOTH);
        JLabel background = new JLabel(new ImageIcon(scaled));      
        background.setBounds(0, 0, 600, 300);
        setContentPane(background);
        background.setLayout(null);
       
        JLabel titleLine1 = new JLabel("MotorPH", SwingConstants.LEFT);
        titleLine1.setBounds(35, 150, 600, 30);
        titleLine1.setFont(new Font("Arial", Font.BOLD, 30));
        titleLine1.setForeground(Color.WHITE);

        JLabel titleLine2 = new JLabel("Payroll System", SwingConstants.LEFT);
        titleLine2.setBounds(35, 180, 600, 30);
        titleLine2.setFont(new Font("Arial", Font.PLAIN, 26));
        titleLine2.setForeground(Color.WHITE);

        background.add(titleLine1);
        background.add(titleLine2);
       

        // Header with logo
        ImageIcon headerIcon = new ImageIcon("./resources/MotorPH.png"); //To get picture from resources folder
        Image icon = headerIcon.getImage().getScaledInstance(20, 20, Image.SCALE_SMOOTH); //To scale the image
        headerIcon = new ImageIcon(icon);        
               
        JLabel label = new JLabel(headerIcon, SwingConstants.LEFT); //Put logo at the top left corner
        label.setForeground(new Color(0, 0, 128)); //Navy Blue color
        label.setBounds(10, 0, 600, 30);
        label.setFont(new Font("Arial",Font.BOLD, 20));

        JPanel whitePanel = new JPanel();
        whitePanel.setLayout(null);
        whitePanel.setBackground(Color.WHITE);
        whitePanel.setBounds(0, 0, 600, 30);
        whitePanel.add(label);
        add(whitePanel);
       
        //Footer
       
        JPanel redPanel = new JPanel();
        redPanel.setLayout(null);
        redPanel.setBackground(new Color(185, 0, 0)); // Red color
        redPanel.setBounds(0, getHeight() - 70, 600, 40); //To position at the bottom of the frame
       
       
        JLabel footerLabel = new JLabel("Â© 2025 MotorPH Payroll", SwingConstants.LEFT);
        footerLabel.setForeground(Color.WHITE);
        footerLabel.setBounds(10, 0, 600, 30); // To position 10px from the left
        footerLabel.setFont(new Font("Arial",Font.BOLD, 10));
        redPanel.add(footerLabel);
       

     // Menu panel with GridLayout for buttons
        menuPanel = new JPanel(); // Initialize menuPanel here
        menuPanel.setLayout(new GridLayout(7, 1, 5, 5)); // 7 rows, 1 column, 5px gaps
        menuPanel.setOpaque(false); //Make panel transparent
        menuPanel.setSize(240, 300); // Set the initial size

        // Initialize buttons
        buttonCalculate = new JButton("Calculate Net Salary");        
        buttonRenderHours = new JButton("Set Rendered Hours");
        buttonOvertime = new JButton("Add Overtime Hours");
        buttonAddEmployee = new JButton("Add Employee");
        buttonView = new JButton("View Employees");
        buttonEdit = new JButton("Edit Employee Details");
        buttonDelete = new JButton("Delete Employee");

        // Add buttons to menu panel
        menuPanel.add(buttonCalculate);
        menuPanel.add(buttonRenderHours);
        menuPanel.add(buttonOvertime);
        menuPanel.add(buttonAddEmployee);
        menuPanel.add(buttonView);
        menuPanel.add(buttonEdit);
        menuPanel.add(buttonDelete);

        add(menuPanel);
       
        // Button styles & listeners
        JButton[] buttons = {buttonCalculate, buttonRenderHours, buttonOvertime, buttonAddEmployee, buttonView, buttonEdit, buttonDelete};
        for (JButton btn : buttons) {
            btn.setFocusable(false);
            btn.setForeground(new Color (0, 0, 128)); // Navy Blue color
            btn.setBackground(Color.WHITE);
            btn.setBorder(BorderFactory.createLineBorder(Color.WHITE, 5, true)); // White border for the buttons
            btn.setHorizontalTextPosition(SwingConstants.CENTER);
        }

        buttonCalculate.addActionListener(e -> {
            try {
                String input = JOptionPane.showInputDialog("Enter Employee ID:");
                if (input == null || input.trim().isEmpty()) return;
                int id = Integer.parseInt(input);
                String result = payrollSystem.calculateNetSalary(id);
                JOptionPane.showMessageDialog(null, result);
            } catch (NumberFormatException ex) {
                JOptionPane.showMessageDialog(null, "Invalid ID entered.", "Error", JOptionPane.ERROR_MESSAGE);
            }
        });

        buttonRenderHours.addActionListener(e -> {
            try {
                String inputId = JOptionPane.showInputDialog("Enter Employee ID:");
                if (inputId == null || inputId.trim().isEmpty()) return;
                int id = Integer.parseInt(inputId);
                String inputHours = JOptionPane.showInputDialog("Enter Rendered Hours:");
                if (inputHours == null || inputHours.trim().isEmpty()) return;
                double hours = Double.parseDouble(inputHours);
                payrollSystem.calculateRenderedHours(id, hours);
                JOptionPane.showMessageDialog(null, "Rendered hours updated.");
            } catch (NumberFormatException ex) {
                JOptionPane.showMessageDialog(null, "Invalid input: " + ex.getMessage());
            }
        });
